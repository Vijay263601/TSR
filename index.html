<!DOCTYPE html>
<html>
<head>
<title>Create Exam</title>
</head>
<body>

<h2>Create Exam</h2>

<input id="teacher" placeholder="Teacher Email"><br>
<input id="name" placeholder="Exam Name"><br>
<input id="duration" type="number" placeholder="Duration (minutes)"><br>

<button onclick="createExam()">Create Exam</button>

<p id="out"></p>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxYWR5EYzUh6zyYsrKT7fP9PULQmReOOj69mqkOqz3SktwOtFzLAKxyygRbAfGdota3mg/exec";

function createExam(){
  const examId = "EXAM_" + Date.now();

  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      type:"CREATE_EXAM",
      examId,
      teacher:teacher.value,
      examName:name.value,
      duration:duration.value,
      maxTabSwitch:2
    })
  }).then(r=>r.json()).then(res=>{
    if(res.status==="EXAM_CREATED"){
      localStorage.setItem("EXAM_ID",examId);
      out.innerHTML =
        "Exam ID: "+examId+"<br>" +
        "<a href='mcq-builder.html'>Add Questions</a><br>" +
        "<b>Student Link:</b> exam.html?examId="+examId;
    } else {
      out.textContent="Error creating exam";
    }
  });
}
</script>

</body>
</html>
