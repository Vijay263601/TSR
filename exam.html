<!DOCTYPE html>
<html>
<body>

<h2>Exam</h2>
<div id="q"></div>
<div id="opts"></div>
<button onclick="next()">Next</button>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbx2s8YFuy5Vrkzuh20cOLrNe7C4c3xsTVNTofJAxHp0ALfdXrRSVOvNMR3FH0tj4vdyhg/exec";
const examId=new URLSearchParams(location.search).get("examId");
let qs=[],i=0,ans={};

fetch(API_URL,{
  method:"POST",
  headers:{ "Content-Type":"application/json" },
  body:JSON.stringify({type:"GET_QUESTIONS",examId})
})
.then(r=>r.json())
.then(d=>{qs=d;render();});

function render(){
  q.textContent=qs[i].question;
  opts.innerHTML="";
  ["A","B","C","D"].forEach(o=>{
    const b=document.createElement("button");
    b.textContent=qs[i][o];
    b.onclick=()=>{ans[qs[i].qid]=o};
    opts.appendChild(b);
  });
}
function next(){ if(i<qs.length-1){i++;render();} }
</script>

</body>
</html>
